{% if slots %}
    <div class="list-group mt-3">
        {% for slot in slots %}
        <div class="list-group-item list-group-item-action {% if slot.status == 'pending' %}list-group-item-warning{% endif %}">
            <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1">Client: {{ slot.client.fullname|default('Guest') }}</h5>
                <small>ID: {{ slot.id }}</small>
            </div>
            <p class="mb-1"><strong>Date/Time:</strong> {{ slot.date.strftime('%Y-%m-%d %H:%M') }}</p>
            <p class="mb-1"><strong>Type:</strong> {{ slot.type }}</p>
            <p class="mb-1"><strong>Status:</strong>
                <span class="badge bg-secondary">{{ slot.status|capitalize }}</span>
            </p>

            {% if status_type == 'preparing' %}
            <form method="POST" action="{{ url_for('lawyer_dashboard') }}" class="mt-2">
                <input type="hidden" name="timeslot_id" value="{{ slot.id }}">

                <div class="d-flex">
                    <select name="new_status" class="form-select form-select-sm me-2" style="max-width: 150px;">
                        <option value="confirmed" {% if slot.status == 'confirmed' %}selected{% endif %}>Confirm</option>
                        <option value="cancelled">Cancel</option>
                        <option value="completed">Complete</option>
                    </select>
                    <button type="submit" class="btn btn-sm btn-primary">Update Status</button>
                </div>
            </form>
            {% endif %}

        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="alert alert-info mt-3">
        {% if status_type == 'preparing' %}No consultations are currently preparing.{% endif %}
        {% if status_type == 'completed' %}No completed consultations.{% endif %}
        {% if status_type == 'cancelled' %}No cancelled consultations.{% endif %}
    </div>
{% endif %}